#use this script to load individual runs and create individual bank dataframes as well as to convert weekly to quarterly output
nB=12
load("Rundata/datamc1.Rdata")
weekdata<-Modelreturns$weekoutput
weekdata[1,]<-weekdata[2,]
banks<-Modelreturns$bankoutput
bankdataw<-as.data.frame(apply(banks,c(1,2),mean))

wbnames<-paste("bank",1:nB,"w",sep="")
for(b in 1:nB){
dframe<-as.data.frame(banks[,,b])
for(l in 1:ncol(dframe)){
if(is.na(dframe[1,l])==TRUE){
  dframe[1,l]<-dframe[2,l]
}}
assign(wbnames[b],dframe)
}

quarterdata<-as.data.frame(array(data = NA, dim=c((nrow(weekdata))/12,ncol(weekdata)),dimnames = list(NULL,colnames(weekdata))))

quarter=0
    for(j in 1:nrow(weekdata)){
    if(j/12==round(j/12)){
    quarter=quarter+1
    quarterdata$c[(j-11*quarter)]<-sum(weekdata$c[(j-11):j])
    quarterdata$c_d[(j-11*quarter)]<-sum(weekdata$c_d[(j-11):j])
    quarterdata$sav_h[(j-11*quarter)]<-sum(weekdata$sav_h[(j-11):j])
    quarterdata$i_d[(j-11*quarter)]<-sum(weekdata$i_d[(j-11):j])
    quarterdata$i[(j-11*quarter)]<-sum(weekdata$i[(j-11):j])
    quarterdata$i_des[(j-11*quarter)]<-mean(weekdata$i_des[(j-11):j])
    quarterdata$YD_e[(j-11*quarter)]<-mean(weekdata$YD_e[(j-11):j])
    quarterdata$M[(j-11*quarter)]<-mean(weekdata$M[(j-11):j])
    quarterdata$V_h[(j-11*quarter)]<-mean(weekdata$V_h[(j-11):j])
    quarterdata$D_h[(j-11*quarter)]<-mean(weekdata$D_h[(j-11):j])
    quarterdata$rr_h[(j-11*quarter)]<-mean(weekdata$rr_h[(j-11):j])
    quarterdata$rr_he[(j-11*quarter)]<-mean(weekdata$rr_he[(j-11):j])
    quarterdata$alpha1[(j-11*quarter)]<-mean(weekdata$alpha1[(j-11):j])
    quarterdata$alpha2[(j-11*quarter)]<-mean(weekdata$alpha2[(j-11):j])
    quarterdata$lev_h[(j-11*quarter)]<-mean(weekdata$lev_h[(j-11):j])
    quarterdata$p_h[(j-11*quarter)]<-mean(weekdata$p_h[(j-11):j])
    quarterdata$H[(j-11*quarter)]<-mean(weekdata$H[(j-11):j])
    quarterdata$M_d[(j-11*quarter)]<-sum(weekdata$M_d[(j-11):j])
    quarterdata$YD[(j-11*quarter)]<-sum(weekdata$YD[(j-11):j])
    quarterdata$bal_h[(j-11*quarter)]<-sum(weekdata$bal_h[(j-11):j])
    quarterdata$bal_f[(j-11*quarter)]<-sum(weekdata$bal_f[(j-11):j])
    quarterdata$bal_g[(j-11*quarter)]<-sum(weekdata$bal_g[(j-11):j])
    quarterdata$bal_cb[(j-11*quarter)]<-sum(weekdata$bal_cb[(j-11):j])
    quarterdata$bal_b1[(j-11*quarter)]<-sum(weekdata$bal_b1[(j-11):j])
    quarterdata$bal_b2[(j-11*quarter)]<-sum(weekdata$bal_b2[(j-11):j])
    quarterdata$H_dn[(j-11*quarter)]<-sum(weekdata$H_dn[(j-11):j])
    quarterdata$H_def[(j-11*quarter)]<-sum(weekdata$H_def[(j-11):j])
    quarterdata$iM[(j-11*quarter)]<-sum(weekdata$iM[(j-11):j])
    quarterdata$iL[(j-11*quarter)]<-sum(weekdata$iL[(j-11):j])
    quarterdata$iD_h[(j-11*quarter)]<-sum(weekdata$iD_h[(j-11):j])
    quarterdata$M_sup[(j-11*quarter)]<-sum(weekdata$M_sup[(j-11):j])
    quarterdata$rep_m[(j-11*quarter)]<-sum(weekdata$rep_m[(j-11):j])
    quarterdata$rep_L[(j-11*quarter)]<-sum(weekdata$rep_L[(j-11):j])
    quarterdata$M_np[(j-11*quarter)]<-sum(weekdata$M_np[(j-11):j])
    quarterdata$TAA_h[(j-11*quarter)]<-mean(weekdata$TAA_h[(j-11):j])
    quarterdata$W[(j-11*quarter)]<-mean(weekdata$W[(j-11):j])
    quarterdata$u_nw[(j-11*quarter)]<-mean(weekdata$u_nw[(j-11):j])
    quarterdata$MH[(j-11*quarter)]<-mean(weekdata$MH[(j-11):j])
    quarterdata$sav_f[(j-11*quarter)]<-sum(weekdata$sav_f[(j-11):j])
    quarterdata$deltaM[(j-11*quarter)]<-sum(weekdata$deltaM[(j-11):j])
    quarterdata$V_f[(j-11*quarter)]<-mean(weekdata$V_f[(j-11):j])
    quarterdata$K[(j-11*quarter)]<-mean(weekdata$K[(j-11):j])
    quarterdata$k[(j-11*quarter)]<-mean(weekdata$k[(j-11):j])
    quarterdata$L[(j-11*quarter)]<-mean(weekdata$L[(j-11):j])
    quarterdata$p[(j-11*quarter)]<-mean(weekdata$p[(j-11):j])
    quarterdata$theta[(j-11*quarter)]<-mean(weekdata$theta[(j-11):j])
    quarterdata$UC[(j-11*quarter)]<-mean(weekdata$UC[(j-11):j])
    quarterdata$WB[(j-11*quarter)]<-sum(weekdata$WB[(j-11):j])
    quarterdata$y[(j-11*quarter)]<-sum(weekdata$y[(j-11):j])
    quarterdata$C[(j-11*quarter)]<-sum(weekdata$C[(j-11):j])
    quarterdata$N_d[(j-11*quarter)]<-sum(weekdata$N_d[(j-11):j])
    quarterdata$Y[(j-11*quarter)]<-sum(weekdata$Y[(j-11):j])
    quarterdata$I[(j-11*quarter)]<-sum(weekdata$I[(j-11):j])
    quarterdata$i_d[(j-11*quarter)]<-sum(weekdata$i_d[(j-11):j])
    quarterdata$L_d[(j-11*quarter)]<-sum(weekdata$L_d[(j-11):j])
    quarterdata$lev_f[(j-11*quarter)]<-mean(weekdata$lev_f[(j-11):j])
    quarterdata$u[(j-11*quarter)]<-mean(weekdata$u[(j-11):j])
    quarterdata$u_e[(j-11*quarter)]<-mean(weekdata$u_e[(j-11):j])
    quarterdata$Pr_f[(j-11*quarter)]<-sum(weekdata$Pr_f[(j-11):j])
    quarterdata$L_np[(j-11*quarter)]<-sum(weekdata$L_np[(j-11):j])
    quarterdata$sav_ft[(j-11*quarter)]<-sum(weekdata$sav_ft[(j-11):j])
    quarterdata$div_f[(j-11*quarter)]<-sum(weekdata$div_f[(j-11):j])
    quarterdata$yfc[(j-11*quarter)]<-mean(weekdata$yfc[(j-11):j])
    quarterdata$meanlev[(j-11*quarter)]<-mean(weekdata$meanlev[(j-11):j])
    quarterdata$sav_g[(j-11*quarter)]<-sum(weekdata$sav_g[(j-11):j])
    quarterdata$gb_h[(j-11*quarter)]<-mean(weekdata$gb_h[(j-11):j])
    quarterdata$r_gb[(j-11*quarter)]<-mean(weekdata$r_gb[(j-11):j])
    quarterdata$V_g[(j-11*quarter)]<-mean(weekdata$V_g[(j-11):j])
    quarterdata$PSBR[(j-11*quarter)]<-sum(weekdata$PSBR[(j-11):j])
    quarterdata$sav_g[(j-11*quarter)]<-sum(weekdata$sav_g[(j-11):j])
    quarterdata$Tax[(j-11*quarter)]<-sum(weekdata$Tax[(j-11):j])
    quarterdata$g[(j-11*quarter)]<-sum(weekdata$g[(j-11):j])
    quarterdata$G[(j-11*quarter)]<-sum(weekdata$G[(j-11):j])
    quarterdata$gb_s[(j-11*quarter)]<-sum(weekdata$gb_s[(j-11):j])
    quarterdata$g_des[(j-11*quarter)]<-mean(weekdata$g_des[(j-11):j])
    quarterdata$rep_gb[(j-11*quarter)]<-sum(weekdata$rep_gb[(j-11):j])
    quarterdata$rep_gbcb[(j-11*quarter)]<-sum(weekdata$rep_gbcb[(j-11):j])
    quarterdata$rep_gbh[(j-11*quarter)]<-sum(weekdata$rep_gbh[(j-11):j])
    quarterdata$iGB[(j-11*quarter)]<-sum(weekdata$iGB[(j-11):j])
    quarterdata$iGB_h[(j-11*quarter)]<-sum(weekdata$iGB_h[(j-11):j])
    quarterdata$iGB_cb[(j-11*quarter)]<-sum(weekdata$iGB_cb[(j-11):j])
    quarterdata$PCB[(j-11*quarter)]<-sum(weekdata$PCB[(j-11):j])
    quarterdata$sav_cb[(j-11*quarter)]<-sum(weekdata$sav_cb[(j-11):j])
    quarterdata$V_cb[(j-11*quarter)]<-mean(weekdata$V_cb[(j-11):j])
    quarterdata$A[(j-11*quarter)]<-mean(weekdata$A[(j-11):j])
    quarterdata$pi_a[(j-11*quarter)]<-mean(weekdata$pi_a[(j-11):j])
    quarterdata$pi_m[(j-11*quarter)]<-mean(weekdata$pi_m[(j-11):j])
    quarterdata$pi_q[(j-11*quarter)]<-mean(weekdata$pi_q[(j-11):j])
    quarterdata$pi_e[(j-11*quarter)]<-mean(weekdata$pi_e[(j-11):j])
    quarterdata$r_cbd[(j-11*quarter)]<-mean(weekdata$r_cbd[(j-11):j])
    quarterdata$r_cbl[(j-11*quarter)]<-mean(weekdata$r_cbl[(j-11):j])
    quarterdata$R[(j-11*quarter)]<-mean(weekdata$R[(j-11):j])
    quarterdata$gb_rcb[(j-11*quarter)]<-sum(weekdata$gb_rcb[(j-11):j])
    quarterdata$gb_cb[(j-11*quarter)]<-mean(weekdata$gb_cb[(j-11):j])
    quarterdata$R_t[(j-11*quarter)]<-mean(weekdata$R_t[(j-11):j])
    quarterdata$gb_dcb[(j-11*quarter)]<-sum(weekdata$gb_dcb[(j-11):j])
    quarterdata$gb_scb[(j-11*quarter)]<-sum(weekdata$gb_scb[(j-11):j])
    quarterdata$buff_h[(j-11*quarter)]<-mean(weekdata$buff_h[(j-11):j])
    quarterdata$R_pd[(j-11*quarter)]<-mean(weekdata$R_pd[(j-11):j])
    quarterdata$cbint[(j-11*quarter)]<-sum(weekdata$cbint[(j-11):j])
    quarterdata$CARt[(j-11*quarter)]<-mean(weekdata$CARt[(j-11):j])
    quarterdata$gb[(j-11*quarter)]<-mean(weekdata$gb[(j-11):j])
    quarterdata$gb_d[(j-11*quarter)]<-mean(weekdata$gb_d[(j-11):j])
    quarterdata$u_ecb[(j-11*quarter)]<-mean(weekdata$u_ecb[(j-11):j])
    quarterdata$iA[(j-11*quarter)]<-sum(weekdata$iA[(j-11):j])
    quarterdata$iR[(j-11*quarter)]<-sum(weekdata$iR[(j-11):j])
    quarterdata$sav_B[(j-11*quarter)]<-sum(weekdata$sav_B[(j-11):j])
    quarterdata$Pr_b[(j-11*quarter)]<-sum(weekdata$Pr_b[(j-11):j])
    quarterdata$V_b[(j-11*quarter)]<-mean(weekdata$V_b[(j-11):j])
    quarterdata$V_bb[(j-11*quarter)]<-mean(weekdata$V_bb[(j-11):j])
    quarterdata$IBS[(j-11*quarter)]<-sum(weekdata$IBS[(j-11):j])
    quarterdata$IBD[(j-11*quarter)]<-sum(weekdata$IBD[(j-11):j])
    quarterdata$CAR[(j-11*quarter)]<-mean(weekdata$CAR[(j-11):j])
    quarterdata$L_sup[(j-11*quarter)]<-sum(weekdata$L_sup[(j-11):j])
    quarterdata$Div_b[(j-11*quarter)]<-sum(weekdata$Div_b[(j-11):j])
    quarterdata$r_dav[(j-11*quarter)]<-mean(weekdata$r_dav[(j-11):j])
    quarterdata$r_Lav[(j-11*quarter)]<-mean(weekdata$r_Lav[(j-11):j])
    quarterdata$r_mav[(j-11*quarter)]<-mean(weekdata$r_mav[(j-11):j])
    quarterdata$r_IB[(j-11*quarter)]<-mean(weekdata$r_IB[(j-11):j])
    quarterdata$Bust[(j-11*quarter)]<-sum(weekdata$Bust[(j-11):j])
    quarterdata$porthgb[(j-11*quarter)]<-mean(weekdata$porthgb[(j-11):j])
    quarterdata$SFCcheck1[(j-11*quarter)]<-mean(weekdata$SFCcheck1[(j-11):j])
    quarterdata$SFCcheck2[(j-11*quarter)]<-mean(weekdata$SFCcheck2[(j-11):j])
    quarterdata$SFCcheck3[(j-11*quarter)]<-mean(weekdata$SFCcheck3[(j-11):j])
    quarterdata$SFCcheck4[(j-11*quarter)]<-mean(weekdata$SFCcheck4[(j-11):j])
    quarterdata$Rshock[(j-11*quarter)]<-mean(weekdata$Rshock[(j-11):j])
    quarterdata$sdev_deff[(j-11*quarter)]<-mean(weekdata$sdev_deff[(j-11):j])
    quarterdata$sdev_defh[(j-11*quarter)]<-mean(weekdata$sdev_defh[(j-11):j])
    quarterdata$V_he[(j-11*quarter)]<-mean(weekdata$V_he[(j-11):j])
    quarterdata$r_mave[(j-11*quarter)]<-mean(weekdata$r_mave[(j-11):j])
    quarterdata$delta_k[(j-11*quarter)]<-mean(weekdata$delta_k[(j-11):j])
    quarterdata$r_Lave[(j-11*quarter)]<-mean(weekdata$r_Lave[(j-11):j])
    quarterdata$tau[(j-11*quarter)]<-mean(weekdata$tau[(j-11):j])
    quarterdata$r_Lavr[(j-11*quarter)]<-mean(weekdata$r_Lavr[(j-11):j])
    quarterdata$r_mavr[(j-11*quarter)]<-mean(weekdata$r_mavr[(j-11):j])
    quarterdata$replacegap[(j-11*quarter)]<-mean(weekdata$replacegap[(j-11):j])
    quarterdata$u_e2[(j-11*quarter)]<-mean(weekdata$u_e2[(j-11):j])
    quarterdata$iD_f[(j-11*quarter)]<-sum(weekdata$iD_f[(j-11):j])
    quarterdata$D_f[(j-11*quarter)]<-mean(weekdata$D_f[(j-11):j])
    quarterdata$YD_tax[(j-11*quarter)]<-sum(weekdata$YD_tax[(j-11):j])
    }
  }